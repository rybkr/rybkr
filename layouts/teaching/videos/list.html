{{ define "main" }}
<main class="post-list">
    <h1>{{ .Title }}</h1>
    <div class="post-content">{{ .Content }}</div>

    <div class="video-grid">
        {{ range .Pages.ByDate.Reverse }}
        <article class="video-card">
            {{ $raw := .Params.video }} {{ $id := replace (replace $raw
            "https://youtu.be/" "" ) "https://www.youtube.com/watch?v=" "" }} {{
            $thumb := printf "https://img.youtube.com/vi/%s/hqdefault.jpg" $id
            }}

            <h2 class="video-title">
                <a href="{{ .Params.video }}" target="_blank" rel="noopener">
                    {{ .Title }}
                </a>
            </h2>

            <div class="video-meta">{{ .Date.Format "2006" }}</div>

            <div class="video-embed">
                <iframe
                    width="100%"
                    height="220"
                    src="https://www.youtube-nocookie.com/embed/{{ $id }}"
                    frameborder="0"
                    allowfullscreen
                >
                </iframe>
            </div>
        </article>
        {{ end }}
    </div>
</main>
{{ end }}
